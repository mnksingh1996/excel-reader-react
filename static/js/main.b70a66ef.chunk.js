(this["webpackJsonpexcel-reader-react"]=this["webpackJsonpexcel-reader-react"]||[]).push([[0],[,,,,,,,function(e,t){},,,,function(e,t){["xlsx","xls","csv"].map((function(e){return"."+e})).join(",")},,,function(e,t,n){e.exports=n(28)},,,,,function(e,t,n){},,,,,,function(e,t){},function(e,t){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),l=n.n(c),o=(n(19),n(1)),i=n(9),u=n(10),s=n(13),d=n(12),p=n(2),m=n.n(p);var f=function(e){return r.a.createElement("form",{className:"popup",onSubmit:e.onSubmit},r.a.createElement("div",null,r.a.createElement("h1",null,"Please state the reason for rejection"),r.a.createElement("textarea",{rows:"3"}),r.a.createElement("div",{className:"cta"},r.a.createElement("button",{className:"btn danger",type:"submit"},"Confirm Reject"),r.a.createElement("button",{type:"button",className:"btn cancel",onClick:e.closePopup},"Cancel"))))},h=function(e){for(var t=[],n=m.a.utils.decode_range(e).e.c+1,a=0;a<n;++a)t[a]={name:m.a.utils.encode_col(a),key:a};return t},b=n(11),v=(n(27),function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={file:{},data:[],cols:[],headers:[],show_popup:!1,current_earning_id:null},e.handleChange=function(t){var n=t.target.files;n&&n[0]&&e.setState({file:n[0]},(function(){return e.handleFile()}))},e.handleFile=function(){var t=new FileReader,n=!!t.readAsBinaryString;t.onload=function(t){var a=t.target.result,r=m.a.read(a,{type:n?"binary":"array",bookVBA:!0}),c=r.SheetNames[0],l=r.Sheets[c],i=m.a.utils.sheet_to_json(l);e.setState({data:i.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{approved:null,selected:!1})})),headers:Object.keys(i[0]),cols:h(l["!ref"])},(function(){return console.log(e.state.data)}))},n?t.readAsBinaryString(e.state.file):t.readAsArrayBuffer(e.state.file)},e.approveSelected=function(){var t=e.state.data.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{approved:!!e.selected||e.approved,selected:!1})}));e.setState({data:t},(function(){return console.log(e.state.data)}))},e.onConfirmReject=function(t){t.preventDefault();var n=e.state.data.map((function(t){return t.earning_id===e.state.current_earning_id?Object(o.a)(Object(o.a)({},t),{},{approved:!1}):t}));e.setState({data:n,show_popup:!1})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.headers,a=t.data,c=t.show_popup,l=t.current_earning_id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("label",{htmlFor:"file"},"Upload excel to load profiles"),r.a.createElement("input",{type:"file",className:"file",id:"file",accept:b.SheetJSFT,onChange:this.handleChange})),c?r.a.createElement(f,{closePopup:function(){return e.setState({show_popup:!1})},current_earning_id:l,onSubmit:this.onConfirmReject}):null,r.a.createElement("main",null,a.length?r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("button",{onClick:this.approveSelected,className:"btn primary"},"Approve selected")),n.map((function(e){return r.a.createElement("th",{key:e},e.split("_").join(" "))})),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,a.map((function(t,c){return r.a.createElement("tr",{key:c},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:t.selected,onChange:function(){return e.setState({data:a.map((function(e){return e.earning_id===t.earning_id?Object(o.a)(Object(o.a)({},e),{},{selected:!e.selected}):e}))})}})),n.map((function(e){return r.a.createElement("td",{key:e},t[e])})),null===t.approved?r.a.createElement("td",null,r.a.createElement("button",{className:"btn primary",onClick:function(){return e.setState({data:a.map((function(e){return e.earning_id===t.earning_id?Object(o.a)(Object(o.a)({},e),{},{approved:!0}):e}))})}},"Approve"),r.a.createElement("span",null,"|"),r.a.createElement("button",{onClick:function(){return e.setState({show_popup:!0,current_earning_id:t.earning_id})},className:"btn danger"},"Reject")):r.a.createElement("td",null,t.approved?r.a.createElement("button",{className:"btn primary inverted"},"Approved"):r.a.createElement("button",{className:"btn primary inverted"},"Rejected")))})))):null))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.b70a66ef.chunk.js.map